
<div id="page" class="site">
  <h2 style="margin-bottom: 4rem; margin-top: -2rem; text-align:center;">¡Reserva Tú Mesa Ahora!</h2>
  <h4 style="margin-bottom: 1rem;text-align:center; margin-top: -2.5rem;">Solo Completa El Formulario Con Los Datos Solicitantes</h4>
  <div class="container2">
    <div class="form-box">
      <div class="progress2">
        <div class="logo">
          <a href="/"><span><img src="../../../assets/ela.png"></span></a>
        </div>
        <ul class="progress2-steps">
          <li class="step active">
            <span>1</span>
            <p>Personal<br><span>Información Cliente</span></p>
          </li>
          <li class="step">
            <span>2</span>
            <p>Reservar<br><span>Reservación Mesa</span></p>
          </li>
          <li class="step">
            <span>3</span>
            <p>Pagos<br><span>Metodos De Pago</span></p>
          </li>
          <li class="step">
            <span>4</span>
            <p>¡Listo!<br><span>Reservación Lista</span></p>
          </li>
        </ul>
      </div>
      <form action="">
        <div class="form-one form-step active">
          <div class="bg-svg"></div>
          <h2> Información Del Cliente</h2>
          <p style="color: black;">Complete todos los campos con la información que se le solicite.</p>
          <div>
            <label>Nombres</label>
            <input type="text" name="Nombres" placeholder="Sus Nombres" required>
          </div>
          <div>
            <label> Apellidos</label>
            <input type="text" name="Apellidos" placeholder="Sus Apellidos" required>
          </div>

          <div>
            <label> Número Telefónico </label>
            <input type="tel" name="Telefono" placeholder="Su Número De Teléfono" maxlength="10" required>
          </div>

        </div>
        <div class="form-two form-step">
          <div class="bg-svg"></div>
          <h2> Datos Reservación Mesa</h2>
          <p class="text">Complete todos los campos con la información que se solicite.</p>

          <div>
            <label>Fecha A Reservar</label>
            <input type="date" name="Fecha" [(ngModel)]="fechaReservada" (change)="validarFecha()" [min]="fechaMinima"
              [attr.max]="fechaMaxima" appDisableDates required>
            <span *ngIf="fechaInvalida" style="color: red;">
              Solo se permiten fechas de viernes a domingo.
            </span>
          </div>

          <div>
            <label>Horario A Reservar</label>
            <input type="time" name="Horario" [(ngModel)]="horarioReservado" (change)="validarHorario()" [min]="'19:00'"
              [max]="'23:59'" [disabled]="fechaInvalida" required>
            <span *ngIf="horarioInvalido" style="color: red;">
              El horario debe ser de 7:00 p.m. a 12:00 a.m.
            </span>
          </div>

          <!-- <div>
            <label>Lugar De La Mesa</label>
            <select name="Lugar" id="Lugar" required (change)="onLugarChange($event)">
              <option value="" selected disabled> Seleccione una opción</option>
              <option value="Interior"> Interior </option>
              <option value="Exterior"> Exterior</option>
            </select>
          </div> -->

          <div>
            <label>¿Para cuántas personas necesita?</label>
            <select name="CantidadPersonas" id="CantidadPersonas" required (change)="onPersonasChange($event)">
              <option value="" selected disabled>Seleccione una opción</option>
              <option value="2Personas">2 Personas</option>
              <option value="4Personas">4 Personas</option>
              <option value="6Personas">6 Personas</option>
            </select>
          </div>
          <p class="text" style="font-weight: bold;">Cantidad De Mesas Disponibles: {{cantidadMesasDisponibles}}</p>
          <!-- Solo mostrar el lugar de la mesa si ya se seleccionaron personas -->
          <div *ngIf="personasSeleccionadas">
            <label>Lugar De La Mesa</label>
            <select name="Lugar" id="Lugar" required (change)="onLugarChange($event)">
              <option value="" selected disabled>Seleccione una opción</option>
              <option value="Interior">Interior</option>
              <option value="Exterior" *ngIf="mostrarExterior">Exterior</option>
            </select>
          </div>

          <div>
            <label for="cantidadMesas">Cantidad De Mesas A Reservar</label>
            <input type="number" id="cantidadMesas" #cantidadMesas name="cantidadMesas"
              placeholder="Cantidad De Mesas A Reservar" min="1" readonly required>
          </div>

          <div>
            <label for="costoMesa">Costo Por Mesa (Sin Decoración)</label>
            <input type="number" id="costoMesa" #costoMesa name="Costo" placeholder="{costoPorMesa}" required readonly>
          </div>


          <div *ngIf="lugarSeleccionado">
            <label>Decoración De la Mesa</label>
            <select name="Decoracion" id="decoracion" (change)="onDecoracionChange($event)" required>
              <option value="" selected disabled>Seleccione una opción</option>
              <option *ngFor="let decoracion of decoracionesDisponibles" [value]="decoracion">
                {{decoracion}}
              </option>
            </select>
          </div>

          <!-- Contenedor para las imágenes de decoración -->
          <div style="display: flex;
          flex-wrap: wrap;
          flex-direction: row;
          align-content: center;
          justify-content: space-around;
          align-items: center;
          margin-left: 2rem;" class="decoracion-imagenes" *ngIf="decoracionSeleccionada === 'Romantica' || decoracionSeleccionada === 'Cumpleaños'">
            <img *ngIf="decoracionSeleccionada === 'Romantica' && mostrarPreviewInterior"
            src="../../../assets/imgDecoracionesReservaciones/RomanticaPreview2.jpeg"
            alt="Decoración Romántica Interior">

            <img *ngIf="decoracionSeleccionada === 'Romantica' && mostrarPreviewExterior"
            src="../../../assets/imgDecoracionesReservaciones/RomanticaPreview1.jpeg"
            alt="Decoración Romántica Exterior">
            <img *ngIf="decoracionSeleccionada === 'Cumpleaños'" src="../../../assets/imgDecoracionesReservaciones/cumpleañosPreview1.jpeg"  alt="Decoración Cumpleaños 1">
            <img *ngIf="decoracionSeleccionada === 'Cumpleaños'" src="../../../assets/imgDecoracionesReservaciones/cumpleañosPreview2.jpeg" alt="Decoración Cumpleaños 2">
          </div>

          <!-- Div para mostrar el precio de la decoración seleccionada -->
          <div *ngIf="decoracionSeleccionada && decoracionSeleccionada !== 'Ninguna' && decoracionSeleccionada !== 'Personalizado'">
            <p style="color: black; margin-bottom: 1em;">
              Precio de decoración: {{ costoDecoraciones[decoracionSeleccionada] | currency:'MXN' }}
            </p>
          </div>


          <div *ngIf="decoracionSeleccionada && decoracionSeleccionada !== 'Ninguna' && decoracionSeleccionada !== 'Personalizado'">
            <label>Costo Por Mesa (Incluyendo Decoración)</label>
            <input type="number" [value]="costoConDecoracion" readonly>
          </div>

          <div *ngIf="decoracionSeleccionada && decoracionSeleccionada === 'Personalizado'">
            <p style="color: black; margin-bottom: 1em;">Primero finalice el proceso de reservación y posteriormente contacte al dueño de la cafetería para acordar la decoración y precios a tratar, al número telefónico:</p>
            <input type="text" [value]="numeroTelefonico" readonly>
          </div>

        </div>

        <div class="form-three form-step">
          <div class="bg-svg"></div>
          <h2>Metodos De Pagos</h2>
          <div>
            <label>Mesas Reservadas: </label>
            <input type="text" [value]="cantidadMesasReservadas" readonly>
            <!-- <span>{{ cantidadMesasReservadas }} mesa(s)</span> -->
          </div>
          <div>
            <label>Total A Pagar Por La Reservación: </label>
            <input type="text" [value]="mensajeTotalPago" readonly>
          </div>
          <p class="text">A continuación, realice el pago por:</p>

          <div>
            <label for="cuentaBancaria">Tipo Banco:</label>
            <input type="text" id="TipoBancaria" name="TipoBancaria" [value]="TipoBancaria" required readonly>
            <label style="margin-top: 0.5rem;" for="cuentaBancaria">Numero De Cuenta:</label>
            <input type="text" id="cuentaBancaria" name="cuentaBancaria" [value]="cuentaBancaria" required readonly>

          </div>

          <div>
            <p class="text">Ya realizado el pago de la reservación. Suba el baucher del pago para que lo comprobemos en sistema.</p>
            <label for="file-upload">Subir Comprobante De Pago</label>
            <input type="file" id="file-upload" #fileUpload accept="image/jpeg,image/jpg,image/png,image/heic">

            <!-- Contenedor para previsualización de la imagen -->
            <div id="preview-container">
              <img #imagePreview id="image-preview" [src]="" alt="Previsualización de la imagen"
                style="display: none; max-width: 100%; height: auto; margin-top: 1em;">
            </div>
          </div>

        </div>

        <div class="form-four form-step">
          <div class="bg-svg"></div>
          <h2>¡Listo! Reservación Finalizada</h2>

          <p  style="color: black;">En un plazo de 30 minutos recibirás un mensaje de confirmación. En caso que no lo
            reciba contactenos al:
            996 105 9860
          </p>
        </div>


        <div *ngIf="!showReservarOtraMesa" class="btn-group">
          <button type="button" class="btn-prev" #prevButton disabled>Regresar</button>
          <button type="button" class="btn-next" #nextButton>Siguiente</button>
          <button type="button" class="btn-submit" (click)="reservarMesa()">Reservar Mesa</button>
        </div>

        <!-- Agrega este botón para reservar otra mesa -->
        <div *ngIf="showReservarOtraMesa" class="btn-group">
          <button type="button" class="btn-next" (click)="reservarOtraMesa()">Reservar otra mesa</button>
        </div>

      </form>
    </div>
  </div>
</div>
